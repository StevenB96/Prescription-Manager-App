<!-- templates/prescription_manager_app/appointment/form.html -->

{% extends 'prescription_manager_app/base.html' %}
{% block title %}{{ form_title }}{% endblock %}
{% block content %}
<h1>{{ form_title }}</h1>
<form method="post">
	{% csrf_token %}
	<p>
		<label for="surgery_id">Surgery ID</label><br>
		<input
			type="text"
			id="surgery_id"
			name="surgery_id"
			value="{{ form.surgery_id.value }}"
			required
		>
	</p>
	<p>
		<label for="medical_professional_id">Medical Professional ID</label><br>
		<input
			type="text"
			id="medical_professional_id"
			name="medical_professional_id"
			value="{{ form.medical_professional_id.value }}"
			required
		>
	</p>
	<p>
		<label for="patient_id">Patient ID</label><br>
		<input
			type="text"
			id="patient_id"
			name="patient_id"
			value="{{ form.patient_id.value }}"
			required
		>
	</p>
	<p>
		<label for="time">Appointment Time</label><br>
		<input
			type="datetime-local"
			id="time"
			name="time"
			value="{{ form.time.value|date:'Y-m-d\\TH:i' }}"
			required
		>
	</p>
	<p>
		<label for="status">Status</label><br>
		<select
			id="status"
			name="status"
			required
		>

			{# first render selected value (even 0) #}
			{% for code, label in status_choices %}
			{% if code|stringformat:'s' == form.status.value|stringformat:'s' %}
			<option
				value="{{ code }}"
				selected
			>{{ label }}</option>
			{% endif %}
			{% endfor %}

			{# then render the rest #}
			{% for code, label in status_choices %}
			{% if code|stringformat:'s' != form.status.value|stringformat:'s' %}
			<option value="{{ code }}">{{ label }}</option>
			{% endif %}
			{% endfor %}
		</select>
	</p>

	<button type="submit">{{ submit_label }}</button>
	<a href="{{ list_url }}">Cancel</a>
</form>
{% endblock %}